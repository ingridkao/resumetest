"use strict";(self["webpackChunkresume202209"]=self["webpackChunkresume202209"]||[]).push([[194],{7194:function(t,e,a){a.r(e),a.d(e,{default:function(){return f}});var r=a(3396),s=a(7139);const o={key:0},c={key:1},i={key:2};function n(t,e,a,n,d,h){return(0,r.wg)(),(0,r.iD)("div",null,[d.load?((0,r.wg)(),(0,r.iD)("div",o,"Load")):d.sourceError?((0,r.wg)(),(0,r.iD)("div",c,(0,s.zw)(d.sourceError),1)):((0,r.wg)(),(0,r.iD)("div",i,(0,s.zw)(d.sourceData),1))])}const d="https://tdx.transportdata.tw/auth/realms/TDXConnect/protocol/openid-connect/token",h="https://tdx.transportdata.tw/api/basic/",u="ingrid7613-b0b80d35-76c6-41fd",l="3808da7e-51be-4ff1-bb66-d03f61b11b96";var p={data(){return{accesstoken:"",load:!1,sourceError:"",sourceData:[],city:"Taoyuan",params:{$format:"JSON",$top:30}}},methods:{getAuthorizationHeader(){const t=new URLSearchParams([["grant_type","client_credentials"],["client_id",u],["client_secret",l]]);return this.axios({method:"POST",url:d,headers:{"content-type":"application/x-www-form-urlencoded"},data:t}).then((t=>{this.accesstoken=t.data})).catch((t=>{this.sourceError=t.response}))},getSourceData(){if(u&&l){if(this.accesstoken&&this.accesstoken.access_token)return this.load=!0,this.sourceData=[],this.axios.get(`${h}v2/Bike/Station/City/${this.city}`,{headers:{authorization:`Bearer ${this.accesstoken.access_token}`},params:this.params}).then((t=>{this.sourceData=t.data})).catch((t=>{this.sourceError=t.response})).finally((()=>{this.load=!1}));this.sourceError="沒有token，每個呼叫來源端IP的上限為每日50次。"}else this.sourceError="要輸入CLIENT_ID和CLIENT_SECRET"}},async created(){await this.getAuthorizationHeader(),await this.getSourceData()}},k=a(89);const w=(0,k.Z)(p,[["render",n]]);var f=w}}]);
//# sourceMappingURL=194.bcc0b7ae.js.map